<!doctype linuxdoc system>

<article>
<title>Ben Eater's 6502 specific information for cc65
<author><url url="mailto:patrick.leboutillier@gmail.com" name="Patrick LeBoutillier">

<abstract>
An overview of the Ben Eater 6502 runtime system as it is implemented for the cc65 C compiler.
</abstract>

<!-- Table of contents -->
<toc>

<!-- Begin the document -->

<sect>Overview<p>
This file contains an overview of the Ben Eater 6502 runtime system as it comes
with the cc65 C compiler. It describes the memory layout, Ben Eater's 6502 specific header
files, available drivers, and any pitfalls specific to that platform.

<sect>Binary format<p>
The standard binary output format generated by the linker for the Ben Eater 6502 target
is a 32kB machine language program. It is of course possible to change this
behaviour by using one of the different linker configs.

<sect>Memory layout<p>
cc65 generated programs with the default setup have a usable ROM range of &dollar;8000 - &dollar;FFF9.

Special locations:
<descrip>
  <tag/IO/
  The IO device (WDC65C22) is mapped starting at &dollar;6000.

  <tag/RAM/
  The RAM range is &dollar;0200 - &dollar;3FFF.

  <tag/Stack/
  The C runtime stack is located at &dollar;3FFF and grows downwards.
</descrip><p>

<sect>Linker configuration<p>
The ld65 linker comes with a default config file for the Ben Eater 6502, which is used via <tt/-t be6502/.

<sect>Platform specific header files<p>
Programs containing Ben Eater's 6502 specific code may use the <tt/be6502.h/ header file.

<sect1>Hardware access<p>
The following pseudo variables declared in the <tt/be6502.h/ header file
allow access to hardware located in the IO address space.

<descrip>
  <tag><tt/PORTB/</tag>
  Port B register.
  <tag><tt/PORTA/</tag>
  Port A register.
  <tag><tt/DDRB/</tag>
  Port B Data Direction Register.
  <tag><tt/DDRA/</tag>
  Port A Data Direction Register.
</descrip><p>

<sect1>LCD functions<p>
A few simple functions are available to control the LCD display. There are basically the functions created by Ben 
in the videos:
<itemize>
<item><tt/void lcd_init()/
<item><tt/void lcd_wait()/
<item><tt/void __fastcall__ lcd_instruction(uint8_t inst)/
<item><tt/void __fastcall__ lcd_print(char c)/
</itemize>

<sect>License<p>
This software is provided 'as-is', without any expressed or implied
warranty.  In no event will the authors be held liable for any damages
arising from the use of this software.

Permission is granted to anyone to use this software for any purpose,
including commercial applications, and to alter it and redistribute it
freely, subject to the following restrictions:

<enum>
<item>  The origin of this software must not be misrepresented; you must not
        claim that you wrote the original software. If you use this software
        in a product, an acknowledgment in the product documentation would be
        appreciated but is not required.
<item>  Altered source versions must be plainly marked as such, and must not
        be misrepresented as being the original software.
<item>  This notice may not be removed or altered from any source
        distribution.
</enum>

</article>
